## 1、request
- response.text 返回的是Unicode格式，通常需要转换为utf-8格式，否则就是乱码。
- response.content 是二进制模式，可以下载视频之类的，如果想看的话需要decode成utf-8格式

## 2、retrying
- 【参考】官方文档：https://pypi.org/project/retrying/
- 介绍：最简单的使用就是给你想不断重试的方法加上 装饰器 @retry
    - 例如：我希望网络请求模块尝试3次之后，在报错！
```python
from retrying import retry
import requests

@retry
def get_html():
    url = ''
    req = requests.get(url)

@retry(stop_max_attempt_number=3)
def stop_after_7_attempts():
    print("Stopping after 3 attempts")
```

## 3、queue
- 包中的常用方法:
    - queue.qsize() 返回队列的大小
    - queue.empty() 如果队列为空，返回True,反之False
    - queue.full() 如果队列满了，返回True,反之False
    - queue.full 与 maxsize 大小对应
    - put(item[, block[, timeout]])
      - 如果可选的参数block为True且timeout为空对象（默认的情况，阻塞调用，无超时）。
      - 如果timeout是个正整数，阻塞调用进程最多timeout秒，如果一直无空空间可用，抛出Full异常（带超时的阻塞调用）。
      - 如果block为False，如果有空闲空间可用将数据放入队列，否则立即抛出Full异常
    - queue.get([block[, timeout]]) 
      - 同上

- 创建一个“队列”对象
  - import queue
  - myqueue = queue.Queue(maxsize = 10)

- 将一个值放入队列中
  - myqueue.put(10)

- 将一个值从队列中取出
  - myqueue.get()

## 4、requests-html
- 【参考】https://www.cnblogs.com/abdm-989/p/12143473.html
- 1、简介
    - requests-html只支持Python 3.6或以上的版本
    - 具备requests的功能以外，还新增了一些更加强大的功能
    - requests获取响应数据，接着再利用bs4或xpath解析库；而在requests-html里面只需要一步就可以完成，而且可以直接进行js渲染
- 2、使用
- 2.1 获取链接
```python
from requests_html import HTMLSession
# 获取请求对象
session = HTMLSession()

# 往新浪新闻主页发送get请求
sina = session.get('https://news.sina.com.cn/')
# print(sina.status_code)
sina.encoding = 'utf-8'

# 获取响应文本信息，与requests无区别
# print(sina.text)

## 获取链接
# 得到新浪新闻主页所有的链接，返回的是一个set集合
print(sina.html.links)
print('*' * 1000)

# 若获取的链接中有相对路径，我们还可以通过absolute_links获取所有绝对链接
print(sina.html.absolute_links)

## 解析数据
# 使用xpath解析数据
hrefs = sina.html.xpath("//p[@class='media-heading lead']/a/@href")
# 使用find解析数据
href = sina.html.find('h3>a',first=True).attrs["href"]
course_target = sina.html.find(".main>.course_target", first=True).text
```

## 5、pyquery
- 1、简介：
    - PyQuery是一个类似于jQuery的解析网页工具
    - pyquery的强大之处就在于它有强大的CSS选择器
    - 和XPATH，BeautifulSoup比起来，PyQuery更加灵活，提供增加节点的class属性，移除某个节点，添加文本信息等功能
    
- 2、基本使用
  - 可以传入字符串、URL、文件名等HTML文本
- 2.1 传入URL
```python
from pyquery import PyQuery as pq
doc = pq(url='https://movie.douban.com/cinema/nowplaying/chengdu/')
print(doc('title'))
# PyQuery对象会首先请求这个url，然后用得到的html内容完成初始化
## 同下面
from pyquery import PyQuery as pq
import requests
text = requests.get('https://movie.douban.com/cinema/nowplaying/chengdu/').text
doc = pq(text)
print(doc('title'))
```
- 2.2 传入字符串型的html文本
```python
from pyquery import PyQuery as pq

s = '<html><title>PyQuery用法总结<title></html>'
doc = pq(s)
print(doc('title'))
```
- 2.3 传入html文件
```python
from pyquery import PyQuery as pq
doc = pq(filename='rr.html')
print(doc('img'))
```
- 2.4 选取节点
```python
print(doc('#items .list li'))
```